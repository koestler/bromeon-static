<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>thor::SingleDispatcher&lt; B, R &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!--<script type="text/javascript" src="$relpath/search.js"></script>-->
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body> <!-- onload='searchBox.OnSelectItem(0);'> -->


<div id="header1"><img src="../../../../bromeon.png" alt="Bromeon"/>
</div>
<div class="sidebar">
  <p><a href="../../../../index.html">Home</a></p>
  <p><a href="../../../../libraries/index.html">C++ Libraries</a></p>
  <div class="sb-sub">
    <p><a href="../../../thor/index.html">Thor</a></p>
    <div class="sb-sub2">
      <div class="sb-cur">
        <p><a href="../../documentation.html">Documentation</a></p>
      </div>
      <p><a href="../../download.html">Download</a></p>
      <p><a href="../../tutorials.html">Tutorials</a></p>
    </div>
    <p><a href="../../../aurora/index.html">Aurora</a></p>
  </div>
  <p><a href="../../../../games/index.html">Games</a></p>
  <p><a href="../../../../contact.html">Contact</a></p>
</div>

<!--
<div id="header"><img src="Bromeon.png" alt="Bromeon" />
</div>
<div id="sidebar">
  <p><a href="index.html">Home</a></p>
  <p><a href="thor.html">Thor C++ Library</a></p>
  <p><a href="doc/index.html">Documentation</a></p>
<p>Tutorials</p>
<p>Downloads</p>
</div>
-->

<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>thor</b>      </li>
      <li class="navelem"><a class="el" href="classthor_1_1_single_dispatcher.html">SingleDispatcher</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">thor::SingleDispatcher&lt; B, R &gt; Class Template Reference<div class="ingroups"><a class="el" href="group___tools.html">Tools</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class that is able to perform dynamic dispatch on multiple functions with one parameter.  
 <a href="classthor_1_1_single_dispatcher.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for thor::SingleDispatcher&lt; B, R &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classthor_1_1_single_dispatcher__inherit__graph.png" border="0" usemap="#thor_1_1_single_dispatcher_3_01_b_00_01_r_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="thor_1_1_single_dispatcher_3_01_b_00_01_r_01_4_inherit__map" id="thor_1_1_single_dispatcher_3_01_b_00_01_r_01_4_inherit__map">
<area shape="rect" id="node2" href="classthor_1_1_non_copyable.html" title="Non&#45;copyable base class." alt="" coords="16,5,144,35"/>
</map>
</div>

<p><a href="classthor_1_1_single_dispatcher-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2ddb46ce1c9269d97d4f8310f1d38e0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2ddb46ce1c9269d97d4f8310f1d38e0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_single_dispatcher.html#ab2ddb46ce1c9269d97d4f8310f1d38e0">SingleDispatcher</a> ()</td></tr>
<tr class="memdesc:ab2ddb46ce1c9269d97d4f8310f1d38e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br/></td></tr>
<tr class="memitem:a2007535ce18225209deb4eef9fad6ccc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2007535ce18225209deb4eef9fad6ccc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_single_dispatcher.html#a2007535ce18225209deb4eef9fad6ccc">~SingleDispatcher</a> ()</td></tr>
<tr class="memdesc:a2007535ce18225209deb4eef9fad6ccc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr class="memitem:a4f03eb5a91b12a96da3286c9d430970d"><td class="memTemplParams" colspan="2">template&lt;class D &gt; </td></tr>
<tr class="memitem:a4f03eb5a91b12a96da3286c9d430970d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d">Register</a> (R(*globalFunction)(D#))</td></tr>
<tr class="memdesc:a4f03eb5a91b12a96da3286c9d430970d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a global function.  <a href="#a4f03eb5a91b12a96da3286c9d430970d"></a><br/></td></tr>
<tr class="memitem:a8a5ef8ecb27614e98525d2627937f837"><td class="memTemplParams" colspan="2">template&lt;class D , class C &gt; </td></tr>
<tr class="memitem:a8a5ef8ecb27614e98525d2627937f837"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classthor_1_1_single_dispatcher.html#a8a5ef8ecb27614e98525d2627937f837">Register</a> (R(C::*memberFunction)(D#), C &amp;object)</td></tr>
<tr class="memdesc:a8a5ef8ecb27614e98525d2627937f837"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a member function.  <a href="#a8a5ef8ecb27614e98525d2627937f837"></a><br/></td></tr>
<tr class="memitem:aa8b21feea2369421bb52316db2098f56"><td class="memTemplParams" colspan="2">template&lt;class D , typename Fn &gt; </td></tr>
<tr class="memitem:aa8b21feea2369421bb52316db2098f56"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classthor_1_1_single_dispatcher.html#aa8b21feea2369421bb52316db2098f56">Register</a> (const Fn &amp;functionObject)</td></tr>
<tr class="memdesc:aa8b21feea2369421bb52316db2098f56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a function object.  <a href="#aa8b21feea2369421bb52316db2098f56"></a><br/></td></tr>
<tr class="memitem:a9d1eca3ae66ba53c6006fbf838726738"><td class="memItemLeft" align="right" valign="top">R&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthor_1_1_single_dispatcher.html#a9d1eca3ae66ba53c6006fbf838726738">Call</a> (B arg) const </td></tr>
<tr class="memdesc:a9d1eca3ae66ba53c6006fbf838726738"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatches the dynamic type of <em>arg</em> and invokes the corresponding function.  <a href="#a9d1eca3ae66ba53c6006fbf838726738"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;class B, typename R = void&gt;<br/>
class thor::SingleDispatcher&lt; B, R &gt;</h3>

<p>Class that is able to perform dynamic dispatch on multiple functions with one parameter. </p>
<p>Sometimes you encounter the situation where you need to implement polymorphic behavior, but you cannot or don't want to add a virtual function to an existing class hierarchy. Here comes dynamic dispatch into play: You define free functions, which can be treated by the dispatcher like virtual functions. </p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">B</td><td>Reference or pointer to polymorphic class, which is the base class of every dispatched function's parameter type. When <em>B</em> is a pointer, the arguments of the dispatched functions shall be pointers too (the same applies to references). If <em>B</em> is a pointer or reference to const, the dispatched functions cannot modify their arguments. In this case, the dispatched functions shall have arguments of type pointer or reference to const, too. </td></tr>
    <tr><td class="paramname">R</td><td>Return type of the dispatched functions.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment"> <span class="comment">// Example class hierarchy</span>
 <span class="keyword">class </span>Base { <span class="keyword">public</span>: <span class="keyword">virtual</span> ~Base() {} };
 <span class="keyword">class </span>Derived1 : <span class="keyword">public</span> Base {};
 <span class="keyword">class </span>Derived2 : <span class="keyword">public</span> Base {};

 <span class="comment">// Free functions for the derived types</span>
 <span class="keywordtype">void</span> Func(Derived1* d);
 <span class="keywordtype">void</span> Func(Derived2* d);

 <span class="comment">// Create dispatcher and register functions</span>
 <a class="code" href="classthor_1_1_single_dispatcher.html" title="Class that is able to perform dynamic dispatch on multiple functions with one parameter.">thor::SingleDispatcher&lt;Base*&gt;</a> dispatcher;
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived1&gt;(&amp;Func);
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived2&gt;(&amp;Func);

 <span class="comment">// Invoke functions on base class pointer</span>
 Base* ptr = <span class="keyword">new</span> Derived1;
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a9d1eca3ae66ba53c6006fbf838726738" title="Dispatches the dynamic type of arg and invokes the corresponding function.">Call</a>(ptr); <span class="comment">// Invokes void Func(Derived1* d);</span>
 <span class="keyword">delete</span> ptr;
</pre></div> </div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9d1eca3ae66ba53c6006fbf838726738"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class B, typename R = void&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">R <a class="el" href="classthor_1_1_single_dispatcher.html">thor::SingleDispatcher</a>&lt; B, R &gt;::<a class="el" href="classthor_1_1_single_dispatcher.html#a9d1eca3ae66ba53c6006fbf838726738">Call</a> </td>
          <td>(</td>
          <td class="paramtype">B&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dispatches the dynamic type of <em>arg</em> and invokes the corresponding function. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Function argument as a reference to the base class. Note that the argument's dynamic type must match <b>exactly</b> with the registered type, derived-to-base conversions are not supported. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The return value of the dispatched function, if any. </dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classthor_1_1_function_call_exception.html" title="Exception class for failed function calls.">FunctionCallException</a></td><td>when no corresponding function is found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4f03eb5a91b12a96da3286c9d430970d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class B, typename R = void&gt; </div>
<div class="memtemplate">
template&lt;class D &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classthor_1_1_single_dispatcher.html">thor::SingleDispatcher</a>&lt; B, R &gt;::<a class="el" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d">Register</a> </td>
          <td>(</td>
          <td class="paramtype">R(*)(D#)&#160;</td>
          <td class="paramname"><em>globalFunction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers a global function. </p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">D</td><td>Type of the derived class. Must be explicitly specified. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">globalFunction</td><td>Pointer to function to register.</td></tr>
  </table>
  </dd>
</dl>
<p>Note that # is a placeholder for either &amp; or *. The type D# has the same attributes as B (pointer, reference, const-qualification): For instance, <b>B=const Base&amp;</b> implies <b>D#=const Derived1&amp;</b>. <br/>
 Example (class hierarchy and dispatcher declaration missing): </p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Overloaded global or namespace-level functions</span>
 <span class="keywordtype">void</span> Func(Derived1&amp;);
 <span class="keywordtype">void</span> Func(Derived2&amp;);

 <span class="comment">// Register functions</span>
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived1&gt;(&amp;Func);
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived2&gt;(&amp;Func);
</pre></div> <dl class="section pre"><dt>Precondition:</dt><dd>A function taking an argument of dynamic type D is not registered yet. </dd></dl>

</div>
</div>
<a class="anchor" id="a8a5ef8ecb27614e98525d2627937f837"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class B, typename R = void&gt; </div>
<div class="memtemplate">
template&lt;class D , class C &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classthor_1_1_single_dispatcher.html">thor::SingleDispatcher</a>&lt; B, R &gt;::<a class="el" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d">Register</a> </td>
          <td>(</td>
          <td class="paramtype">R(C::*)(D#)&#160;</td>
          <td class="paramname"><em>memberFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">C &amp;&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers a member function. </p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">D</td><td>Type of the derived class. Must be explicitly specified. </td></tr>
    <tr><td class="paramname">C</td><td>Class that holds the member function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">memberFunction</td><td>Pointer to member function to register. </td></tr>
    <tr><td class="paramname">object</td><td>Reference to the object on which the member function is invoked.</td></tr>
  </table>
  </dd>
</dl>
<p>Note that # is a placeholder for either &amp; or *. The type D# has the same attributes as B (pointer, reference, const-qualification): For instance, <b>B=const Base&amp;</b> implies <b>D#=const Derived1&amp;</b>. <br/>
 Example (class hierarchy and dispatcher declaration missing): </p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Class with member functions</span>
 <span class="keyword">struct </span>MyClass
 {
     <span class="keywordtype">void</span> MemFunc(Derived1&amp;);
     <span class="keywordtype">void</span> MemFunc(Derived2&amp;);
 } obj;

 <span class="comment">// Register overloaded functions</span>
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived1&gt;(&amp;MyClass::MemFunc, obj);
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived2&gt;(&amp;MyClass::MemFunc, obj);
</pre></div> <dl class="section pre"><dt>Precondition:</dt><dd>A function taking an argument of dynamic type D is not registered yet. </dd></dl>

</div>
</div>
<a class="anchor" id="aa8b21feea2369421bb52316db2098f56"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class B, typename R = void&gt; </div>
<div class="memtemplate">
template&lt;class D , typename Fn &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classthor_1_1_single_dispatcher.html">thor::SingleDispatcher</a>&lt; B, R &gt;::<a class="el" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d">Register</a> </td>
          <td>(</td>
          <td class="paramtype">const Fn &amp;&#160;</td>
          <td class="paramname"><em>functionObject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers a function object. </p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">D</td><td>Type of the derived class. Must be explicitly specified. </td></tr>
    <tr><td class="paramname">Fn</td><td>Type of the function object. Can be deduced from the argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">functionObject</td><td>Functor to register.</td></tr>
  </table>
  </dd>
</dl>
<p>Incomplete example using a function object (you can also have separate functors for each function): </p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Class for function objects</span>
 <span class="keyword">struct </span>Functor
 {
    <span class="keywordtype">void</span> operator() (Derived1&amp;);
    <span class="keywordtype">void</span> operator() (Derived2&amp;);
 };

 <span class="comment">// Register functor</span>
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived1&gt;(Functor());
 dispatcher.<a class="code" href="classthor_1_1_single_dispatcher.html#a4f03eb5a91b12a96da3286c9d430970d" title="Registers a global function.">Register</a>&lt;Derived2&gt;(Functor());
</pre></div> <dl class="section pre"><dt>Precondition:</dt><dd>A function taking an argument of dynamic type D is not registered yet. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Tools/<a class="el" href="_single_dispatcher_8hpp_source.html">SingleDispatcher.hpp</a></li>
</ul>
</div><!-- contents -->

<!--hr class="footer" /-->
<div id="footer">
  Copyright (c) Jan Haller 2011-2016
</div>
<!--
<address class="footer"><small>
Generated on Sat Jun 16 2012 16:43:55 for Thor by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0</small></address>
-->
</body>
</html>
